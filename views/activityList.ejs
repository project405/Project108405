<!doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--  js   -->
    <script src="/javascripts/jquery.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="/javascripts/navbar.js"></script>


    <link href="/css/header.css" rel="stylesheet" type="text/css" />
    <link href="/css/activityList.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/imgs/logo.ico" type="image/x-icon" />

    <title>文藝富心</title>
</head>

<body>
    <!-- navbar -->
    <div id="header"></div>

    
    <div class="banner">

        </div>
        <!-- 文章列表區塊 -->
        <div class="container-fluid d-flex justify-content-center">
            <div class="col-lg-8">
                <div class="contain">
                    <div class="col-lg-1 activeStatus">
                        <a href="#" class="badge badge-danger">限時活動</a>
                    </div>
                    <div class="col-lg-12 ">
                        <div class="row active d-flex justify-content-center">
                            <div class="wrapperCard card-img-top col-lg-3"
                                style="background-image: url('imgs/recommend/movie2.jpg'); ">
                            </div>
                            <div class="content col-lg-9">
                                <h4 style="font-weight:bold;">自己做健康又好吃 準備所有材料</h4>
                                <p class="datetime"> ∙ 活動截止日 2019-12-13</p>
                                低筋麵粉過篩 奶油放入耐熱容器裡 隔水加熱使其融化
                                檸檬清洗乾淨外皮再刨絲及榨汁備用
                                先將奶油乳酪放置於室溫軟化
                                製作餅皮 餅乾放入較厚的食物袋中用桿麵棍敲碎
                                將融化的奶油稍微冷卻後備用
                                低筋麵粉過篩 奶油放入耐熱容器裡 隔水加熱使其融化
                                檸檬清洗乾淨外皮再刨絲及榨汁備用
                                先將奶油乳酪放置於室溫軟化
                                製作餅皮 餅乾放入較厚的食物
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>
    
                <div class="contain">
                        <div class="col-lg-1 activeStatus">
                            <a href="#" class="badge badge-info">過去活動</a>
                        </div>
                        <div class="col-lg-12 ">
                            <div class="row active d-flex justify-content-center">
                                <div class="wrapperCard card-img-top col-lg-3"
                                    style="background-image: url('imgs/recommend/movie2.jpg'); ">
                                </div>
                                <div class="content col-lg-9">
                                    <h4 style="font-weight:bold;">自己做健康又好吃 準備所有材料</h4>
                                    <p class="datetime"> ∙ 活動截止日 2019-12-13</p>
                                    低筋麵粉過篩 奶油放入耐熱容器裡 隔水加熱使其融化
                                    檸檬清洗乾淨外皮再刨絲及榨汁備用
                                    先將奶油乳酪放置於室溫軟化
                                    製作餅皮 餅乾放入較厚的食物袋中用桿麵棍敲碎
                                    將融化的奶油稍微冷卻後備用
                                    低筋麵粉過篩 奶油放入耐熱容器裡 隔水加熱使其融化
                                    檸檬清洗乾淨外皮再刨絲及榨汁備用
                                    先將奶油乳酪放置於室溫軟化
                                    製作餅皮 餅乾放入較厚的食物
                                </div>
                            </div>
                            <hr>
                        </div>
                    </div>
            </div>
        </div>
        <!-- 文章列表區塊結束 -->
        <a href="#" id="gotop">
            <i class="fa fa-angle-up"></i>
        </a>
    
    


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="/javascripts/active.js"></script>
    <!-- 收藏 ajax script -->
    <script>
        var pagePrevious = parseInt('<%= items[7][0]%>') - 1
        var pageNext = parseInt('<%= items[7][0]%>') + 1
        if (pagePrevious == 0) {
            $('.previous').addClass('disabled')
        } else {
            $('.previous').remove('disabled')
        }
        if ('<%= items[6][0].count%>' == '<%= items[7][0]%>') {
            $('.next').addClass('disabled')
        } else {
            $('.next').remove('disabled')
        }
        Array.from($('.pagination').find('.page-link')).map((item) => {
            if (item.innerText == '<%= items[7][0]%>') {
                item.parentElement.classList.add('disabled')
                item.style.fontWeight = 'bolder'
            }
        })
        Array.from($('.page-link').parent('li.disabled')).map((item) => {
            item.children[0].style.color = "#d9d9d9"
        })

        $('button').click(function () {
            if ($(this).children('.fa-gratipay').length > 0) {
                $(this).parent('div').find('.fa-gratipay').parent('button').attr('disabled', true)
                setTimeout(() => {
                    $('button').attr('disabled', false)
                }, 1000)
            }
        })
        //新增收藏
        function addColle(artiNum) {
            collection(artiNum);
            $.ajax({
                url: '/addCollection',
                type: 'POST',
                dataType: 'TEXT',
                data: { "likeType": "article", "artiNum": artiNum },
                success: function (res) {
                },
                error: function (res) {
                    console.log("失敗", JSON.stringify(res));
                }
            });
        };
        //刪除收藏
        function delColle(artiNum) {
            cancelCollection(artiNum);
            $.ajax({
                url: '/delCollection',
                type: 'POST',
                dataType: 'TEXT',
                data: { "likeType": "article", "artiNum": artiNum },
                success: function (res) {
                },
                error: function (res) {
                    console.log("失敗", JSON.stringify(res));
                }
            });
        };
        //點收藏後改變屬性
        function collection(artiNum) {
            document.getElementById("delColle" + artiNum).style.display = "inline";
            document.getElementById("LikeUnLogIn" + artiNum).style.display = "none";
            document.getElementById("addColle" + artiNum).style.display = "none";
        }
        //取消收藏後改變屬性
        function cancelCollection(artiNum) {
            document.getElementById("addColle" + artiNum).style.display = "inline";
            document.getElementById("LikeUnLogIn" + artiNum).style.display = "none";
            document.getElementById("delColle" + artiNum).style.display = "none";
        }
    </script>
    <!-- 愛心 ajax script -->
    <script>
        //新增愛心
        function addLike(artiNum) {
            $.ajax({
                url: '/addLike',
                type: 'POST',
                dataType: 'text',
                data: { "likeType": "article", "artiNum": artiNum },
                success: function (res) {
                    likeCount(artiNum);
                    like(artiNum);
                },
                error: function (res) {
                    console.log("失敗", res);
                }
            });
        };
        //刪除愛心
        function delLike(artiNum) {
            $.ajax({
                url: '/delLike',
                type: 'POST',
                dataType: 'text',
                data: { "likeType": "article", "artiNum": artiNum },
                success: function (res) {
                    likeCount(artiNum);
                    cancelLike(artiNum);
                },
                error: function (res) {
                    console.log("刪除失敗", JSON.stringify(res));
                }
            });
        };
        //點愛心後改變屬性
        function like(artiNum) {
            document.getElementById("delLike" + artiNum).style.display = "inline";
            document.getElementById("LikeUnLogIn" + artiNum).style.display = "none";
            document.getElementById("addLike" + artiNum).style.display = "none";
        }
        //取消愛心後改變屬性
        function cancelLike(artiNum) {
            document.getElementById("addLike" + artiNum).style.display = "inline";
            document.getElementById("LikeUnLogIn" + artiNum).style.display = "none";
            document.getElementById("delLike" + artiNum).style.display = "none";
        }
        function likeCount(artiNum) {
            $.ajax({
                url: '/likeCount',
                type: 'POST',
                dataType: 'JSON',
                data: { "likeType": "article", "artiNum": artiNum },
                success: function (res) {
                    document.getElementById("addLikeCount" + artiNum).innerHTML = JSON.stringify(res);
                    document.getElementById("delLikeCount" + artiNum).innerHTML = JSON.stringify(res);
                },
                error: function (res) {
                    console.log("失敗", JSON.stringify(res));
                }
            });
        }
    </script>

</body>

</html>